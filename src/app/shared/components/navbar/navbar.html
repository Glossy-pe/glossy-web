<div class="relative w-full z-50">

  <header class="bg-sky-100 py-4 px-4 md:pt-5 md:pb-6 md:px-10 overflow-visible">

    <div class="max-w-7xl mx-auto flex flex-wrap lg:flex-nowrap justify-between items-center gap-y-4 gap-x-4 md:gap-6">

      <div class="flex flex-col items-start gap-1 shrink-0 order-1">
        <a href="#" class="text-3xl md:text-4xl font-serif font-black text-yellow-500 tracking-tight hover:opacity-80 transition leading-none">
          GLOSSY
        </a>

        <button class="px-3 py-1 md:px-4 md:py-1.5 bg-lime-400 hover:bg-lime-300 text-black text-[9px] md:text-[10px] font-black uppercase tracking-widest rounded border border-black shadow-[1px_1px_0px_rgba(0,0,0,1)] md:shadow-[2px_2px_0px_rgba(0,0,0,1)] transition-transform active:translate-y-0.5 active:shadow-none -rotate-1">
          ★ Venta de Verano
        </button>
      </div>

      <div class="flex items-center justify-end shrink-0 order-2 lg:order-3">
        <button (click)="goToCart()" class="flex items-center gap-2 md:gap-3 group">

          <div class="relative w-9 h-9 md:w-10 md:h-10 rounded-full bg-green-500 flex items-center justify-center shadow-lg group-hover:bg-lime-400 transition-colors duration-300">
            <svg class="w-5 h-5 text-white group-hover:text-black transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
            </svg>
            <span class="absolute -top-1 -right-1 w-3.5 h-3.5 md:w-4 md:h-4 bg-rose-400 rounded-full border-2 border-sky-100 text-[9px] font-bold text-white flex items-center justify-center">*</span>
          </div>

          <div class="hidden md:flex flex-col items-start">
            <span class="text-[9px] text-gray-400 font-light uppercase tracking-widest">Mi Bolsa</span>
            <span class="text-xs text-black font-normal border-b border-transparent group-hover:border-black transition-all">Ver Items</span>
          </div>
        </button>
      </div>


      <div class="order-3 lg:order-2 w-full lg:flex-1 lg:max-w-3xl flex flex-col gap-3 md:gap-4 px-0 lg:px-10 mt-1 lg:mt-0">

        <nav class="flex flex-nowrap lg:flex-wrap justify-start gap-2 md:gap-3 overflow-x-auto pb-1" style="scrollbar-width: none; -ms-overflow-style: none;">
          <a href="#" class="shrink-0 px-3 py-1 md:px-4 bg-rose-200 hover:bg-rose-300 text-black text-[10px] md:text-xs font-bold uppercase rounded-full transition-colors shadow-sm whitespace-nowrap">
            Rostro
          </a>
          <a href="#" class="shrink-0 px-3 py-1 md:px-4 bg-amber-100 hover:bg-amber-200 text-black text-[10px] md:text-xs font-bold uppercase rounded-full transition-colors shadow-sm whitespace-nowrap">
            Ojos
          </a>
          <a href="#" class="shrink-0 px-3 py-1 md:px-4 bg-purple-200 hover:bg-purple-300 text-black text-[10px] md:text-xs font-bold uppercase rounded-full transition-colors shadow-sm whitespace-nowrap">
            Skincare
          </a>
          <a href="#" class="shrink-0 px-3 py-1 md:px-4 bg-white hover:bg-white/80 text-black text-[10px] md:text-xs font-bold uppercase rounded-full border border-sky-200 transition-colors shadow-sm whitespace-nowrap">
            Kits
          </a>
        </nav>

<div class="flex items-center w-full bg-white rounded-full shadow-md border-b-2 border-sky-200/50 overflow-visible h-10 md:h-12 relative group">

  <div class="relative h-full flex items-center border-r border-gray-100 pl-3 pr-2 md:pl-5 md:pr-3 cursor-pointer hover:bg-gray-50 transition-colors shrink-0">
    <span (click)="goProducts()" class="text-[10px] md:text-xs font-medium text-gray-500 tracking-wide">Todo</span>
    <svg class="w-2.5 h-2.5 md:w-3 h-3 ml-1 md:ml-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
    </svg>
  </div>

  <input
    type="text"
    [value]="searchTerm()"
    (input)="onSearchInput($event)"
    (keyup.enter)="onSearchSubmit()"
    (blur)="closeDropdown()"
    class="flex-1 h-full px-3 md:px-4 text-xs md:text-sm font-light text-gray-600 placeholder-gray-300 focus:outline-none bg-transparent min-w-0"
    placeholder="Encuentra tu brillo..."
    autocomplete="off"
  />

  <button (click)="onSearchSubmit()" class="h-full px-4 md:px-6 text-gray-400 hover:text-rose-400 transition-colors shrink-0">
    <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
    </svg>
  </button>

  <!-- Dropdown resultados -->
  @if (showDropdown()) {
    <div class="absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl shadow-xl border border-sky-100 z-50 overflow-hidden max-h-72 overflow-y-auto">

      @if (isSearching()) {
        <div class="px-4 py-4 text-center text-gray-400 text-xs">Buscando...</div>
      }

      @if (!isSearching() && searchResults().length === 0 && searchTerm().trim()) {
        <div class="px-4 py-4 text-center text-gray-400 text-xs">
          Sin resultados para "<span class="font-medium text-gray-600">{{ searchTerm() }}</span>"
        </div>
      }

      @for (product of searchResults(); track product.id) {
        <button
          (mousedown)="goToProduct(product.id)"
          class="w-full flex items-center gap-3 px-4 py-3 hover:bg-sky-50 transition-colors text-left border-b border-gray-50 last:border-none"
        >
          <div class="flex flex-col min-w-0">
            <span class="text-xs font-semibold text-gray-800 truncate">{{ product.name }}</span>
          </div>
        </button>
      }

      @if (searchResults().length > 0) {
        <button
          (mousedown)="onSearchSubmit()"
          class="w-full px-4 py-3 text-center text-xs font-bold text-sky-500 hover:bg-sky-50 transition-colors"
        >
          Ver todos los resultados →
        </button>
      }
    </div>
  }
</div>
      </div>

    </div>
  </header>

<div class="absolute bottom-0 left-0 w-full translate-y-[98%] z-20 pointer-events-none leading-[0]">
    <svg class="relative block w-full h-[12px] md:h-[20px]" fill="currentColor" class="text-sky-100" preserveAspectRatio="none" viewBox="0 0 1600 600" xmlns="http://www.w3.org/2000/svg">
      <path d="M0,40 Q9,32 18,40 T36,40 T54,40 T72,40 T90,40 T108,40 T126,40 T144,40 T162,40 T180,40 T198,40 T216,40 T234,40 T252,40 T270,40 T288,40 T306,40 T324,40 T342,40 T360,40 T378,40 T396,40 T414,40 T432,40 T450,40 T468,40 T486,40 T504,40 T522,40 T540,40 T558,40 T576,40 T594,40 T612,40 T630,40 T648,40 T666,40 T684,40 T702,40 T720,40 T738,40 T756,40 T774,40 T792,40 T810,40 T828,40 T846,40 T864,40 T882,40 T900,40 T918,40 T936,40 T954,40 T972,40 T990,40 T1008,40 T1026,40 T1044,40 T1062,40 T1080,40 T1098,40 T1116,40 T1134,40 T1152,40 T1170,40 T1188,40 T1206,40 T1224,40 T1242,40 T1260,40 T1278,40 T1296,40 T1314,40 T1332,40 T1350,40 T1368,40 T1386,40 T1404,40 T1422,40 T1440,40 T1458,40 T1476,40 T1494,40 T1512,40 T1530,40 T1548,40 T1566,40 T1584,40 T1600,40 V0 H0 Z"></path>
    </svg>
  </div>

</div>